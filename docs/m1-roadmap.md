# Rint Rust Microkernel — M1 里程碑路线图

## 概述
M1 目标是实现"可在 QEMU 启动并运行的最小微内核"，覆盖引导、内核初始化、内存管理、线程与调度、基础 IPC、系统调用框架、一个用户态演示、构建与 CI，以及必要的文档与合规。

## 成功标准
- 在 QEMU 上稳定启动，显示内核启动日志
- 可创建/调度至少一个内核线程，并处理时钟中断
- 提供最小系统调用集，用户程序能与内核通过 IPC 交换消息
- 提供构建脚本与 CI，能自动编译与运行基本测试
- 文档齐备，明确 unsafe 使用准则与贡献流程

## 参考项目
- Redox OS、seL4、Tock OS、xv6
- 取其模块边界、能力模型理念与简化的教学实现方法

## 技术决策（已确认）
- 目标架构：x86_64
- 引导方案：Limine (stivale2)
- 虚拟化环境：QEMU
- 许可证：Apache-2.0
- CI：GitHub Actions（构建与 QEMU 启动日志校验）

## 模块与任务
1. Boot 与内核入口：引导链、传递内存映射、早期日志
2. 内核初始化：异常/中断向量、panic/error 处理
3. 内存管理：页表建立、内核映射、物理页分配器
4. 线程与调度：TCB、上下文切换、时间片轮转、时钟中断
5. IPC：消息通道、对象句柄、能力模型雏形
6. 系统调用：syscall 号表、陷入处理、参数校验、最小集
7. 用户态演示：打印/消息收发，ELF 或简化加载
8. 构建与 CI：Cargo 工作区、脚本、Actions 工作流
9. 文档与合规：README、CONTRIBUTING、unsafe 指南、许可证审查

## 时间线（示例）
- 第 1-2 周：Boot/入口、内核初始化、日志；构建脚本与 QEMU 运行
- 第 3-4 周：分页与物理分配器；线程与调度器初版
- 第 5-6 周：IPC 与 syscall 框架；用户态演示；CI 与测试基线
- 第 7 周：文档完善、代码结构重构、许可证与依赖清单、稳定性收尾

## 风险与缓解
- Limine 融合：先实现最小入口与串口日志，逐步对接 Limine requests（内存映射等）
- unsafe 边界：制定准则，模块内聚，代码审查与静态检查（clippy）
- 时间不可预期：任务颗粒细化、持续集成检验进度

## 交付清单
- 可运行的最小内核（二进制/镜像）
- QEMU 启动脚本与 CI 工作流
- 用户态演示程序与说明（占位）
- 架构与贡献文档、许可证与依赖清单
